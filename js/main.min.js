
'use strict';

//document.addEventListener('contextmenu', event => event.preventDefault());

//
// Preloader =====================================
//

$(window).on('load', function() {
	$('#status').fadeOut();
	$('#preloader').delay(350).fadeOut('slow');
	$('body').delay(350).css({'overflow':'overlay'});
});

//
// Search ========================================
//

let searchbarStatus = false;

$('.searchbar').on('click', function(e) {
  e.stopPropagation();
  if (searchbarStatus === false) {
    e.preventDefault();
    searchbarStatus = true;
    $(this).addClass('active');
    $('.header .nav-item:not(.nav-search)').css('display', 'none');
  }
});

$(document).on('click', function(e) {
  if (searchbarStatus === true) {
    searchbarStatus = false;
    $('.searchbar').removeClass('active');
		$('.nav-item:not(.nav-search, .nav-item.mobil)').delay(500).queue(function (next) {
			$(this).css('display', 'block');
			next();
		});
  }
});

//
// ServerOnline ==================================
//

var ServerOnline = (function() {
  var $onlineText = $('[data-toggle="onlinetext"]');
  var $onlineBox = $('[data-toggle="onlinebox"]');
  var $serverIP = $onlineText.attr("server-ip");
  // Init
  function init($onlineText) {
  	$.ajax({
  		url: "https://mcapi.us/server/status?ip=" + $serverIP,
  		dataType: "json",
  		success: function(data) {;
  			var status = data["online"];
  			if (status == true) {
  				var online = data["players"]["now"];
  				$onlineText.text(online);
  				$onlineBox.addClass("active");
  			}
  			else {
  				$onlineText.text("0");
  			}
  		}
  	});
  }
  if ($onlineText.length) {
    $onlineText.each(function() {
      init($(this));
    });
  }
  // UPDATE - 10 Seconds //
  setInterval(function() {
    if ($onlineText.length) {
      $onlineText.each(function() {
        init($(this));
      });
    }
  }, 5000);
})();

//
// CopyServerIP ==================================
//

var CopyServerIP = (function() {
  var $copyip = $('[data-toggle="copyip"]');
  // Init
  function init($copyip) {
  	var clipboard = new ClipboardJS('[data-toggle="copyip"]');
	clipboard.on("success", function(e) {
		swal.fire({
			title: "BAŞARILI!",
			text: "Sunucu adresi başarıyla kopyalandı!",
			type: "success",
			confirmButtonColor: "#02b875",
			confirmButtonText: "Tamam"
		});
	});
  }
  if ($copyip.length) {
    $copyip.each(function() {
      init($(this));
    });
  }
})();

//
// ClickDelete ==================================
//

var ClickDelete = (function() {
  var $clickdelete = $(".clickdelete");
  // Init
  function init($clickdelete) {
    $clickdelete.on("click", function() {
      return confirm("Silmek istediğinize emin misiniz?");
    });
  }
  if ($clickdelete.length) {
    $clickdelete.each(function() {
      init($(this));
    });
  }
})();

function footerResize($footerHeight) {
	$footerHeight+=50;
	$("body").css("margin-bottom", $footerHeight + "px");
}
function newsImageResize($newsImageWidth) {
	var $imgNewHeight = (($newsImageWidth*360)/640);
	$(".img-container").height($imgNewHeight);
}
$(window).resize(function() {
	/* FOOTER RESIZE */
	footerResize($("footer").height());
	/* NEWS IMAGE RESIZE */
	newsImageResize($(".img-container").width());
});
$(window).on("load", function() {
	/* Scroll Up */
	$.scrollUp({
		scrollText: '<i class="fa fa-angle-up"></i>'
	});
	/* Tooltip */
	$('[data-toggle="tooltip"]').tooltip();
	/* New Tab */
	$("a[rel=external]").attr("target", "_blank");
	/* FOOTER RESIZE */
	footerResize($("footer").height());
	/* NEWS IMAGE RESIZE */
	newsImageResize($(".img-container").width());
});
